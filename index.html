<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spectra Artifacts</title>
    <script>
        async function listDir(path) {
            const url = `https://api.github.com/repos/JTechGaming/SpectraArtifacts/contents/${path}`;
            const res = await fetch(url);
            return await res.json();
        }

        async function loadArtifacts() {
            const root = document.getElementById("content");
            const groups = await listDir("org");

            for (const group of groups) {
                if (group.type !== "dir") continue;

                const groupDiv = document.createElement("div");
                groupDiv.innerHTML = `<h2>${group.name}</h2>`;
                root.appendChild(groupDiv);

                const packages = await listDir(`org/${group.name}`);

                for (const pkg of packages) {
                    if (pkg.type !== "dir") continue;

                    const pkgDiv = document.createElement("div");
                    pkgDiv.style.marginLeft = "20px";
                    pkgDiv.innerHTML = `<h3>${pkg.name}</h3>`;
                    root.appendChild(pkgDiv);

                    const versions = await listDir(`org/${group.name}/${pkg.name}`);

                    for (const ver of versions) {
                        if (ver.type !== "dir") continue;

                        const link = document.createElement("a");
                        link.href = `./org/${group.name}/${pkg.name}/${ver.name}/`;
                        link.innerText = ver.name;

                        const verDiv = document.createElement("div");
                        verDiv.style.marginLeft = "40px";
                        verDiv.appendChild(link);
                        root.appendChild(verDiv);
                    }
                }
            }
        }

        loadArtifacts();
    </script>
</head>
<body>
    <h1>Spectra Artifacts Repository</h1>
    <div id="content"></div>
</body>
</html>
